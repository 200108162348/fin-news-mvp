# 项目进度与协作指南

## 🎯 项目概述

**项目名称**: Fin-News MVP - 金融新闻分析平台  
**目标**: 基于AWS云原生的金融新闻聚合与分析平台，集成RAG管道和LLM  
**时间轴**: 3周MVP开发（8/20-9/9）  
**当前状态**: 项目基础结构完成，index模块核心功能已实现

## 📊 当前进度 (截至8/20)

### ✅ 已完成
- [x] 项目目录结构搭建
- [x] AWS架构设计（低成本企业级方案）
- [x] 技术选型确定
- [x] index模块核心功能（分块+向量化+FAISS存储）
- [x] 基础配置文件

### 🚧 进行中
- [ ] index模块测试和优化
- [ ] 数据模型定义
- [ ] A的配合接口准备

### ⏳ 等待中
- [ ] A完成数据采集模块
- [ ] A提供标准化新闻数据

## �� 人员分工

### A（数据采集/检索/价格）
- **负责模块**: ingest, retrieve, pricing
- **技术栈**: 后端 + 数据
- **主要任务**: RSS解析、去重、价格分析

### B（你 - 处理/建库/RAG/前端）
- **负责模块**: index, rag, api, dashboard
- **技术栈**: 后端 + 应用
- **主要任务**: 分块、向量化、RAG链、前端展示

## 🔄 协作流程

### 第一阶段：数据 → 向量库 (8/20-8/26)

#### A的工作（需要先完成）
1. **创建SourceConnector接口**
   - 实现Reuters RSS、Yahoo Finance、SEC Edgar
   - 输出标准化数据格式
   - 实现去重逻辑

2. **数据格式要求**
   ```json
   {
     "id": "unique_doc_id",
     "title": "新闻标题",
     "body": "新闻正文",
     "published_at": "2024-08-20T10:00:00Z",
     "url": "新闻链接",
     "source": "数据源",
     "tickers": ["AAPL", "GOOGL"]
   }
   ```

#### 你的工作（可以并行准备）
1. **完善index模块**
   - 测试分块和向量化功能
   - 优化FAISS存储性能
   - 添加错误处理和日志

2. **准备接收A的数据**
   - 创建数据模型（Pydantic schemas）
   - 设计数据验证逻辑
   - 准备批量处理接口

#### 协作点
- **等待A完成**: 数据采集和标准化
- **你可以开始**: index模块测试和优化
- **交接时间**: A完成数据采集后，你立即开始分块+向量化

### 第二阶段：检索 → RAG → 故事 (8/27-9/2)

#### A的工作
1. **实现检索逻辑**
   - ticker + 时间窗过滤
   - 向量检索集成
   - 结果重排和聚合

#### 你的工作
1. **RAG两条链**
   - 抽取链（结构化JSON输出）
   - 摘要链（自然语言摘要）
2. **故事组装**
   - 事件聚类
   - 来源合并

#### 协作点
- **A完成检索**: 提供检索结果
- **你开始RAG**: 基于检索结果生成故事
- **数据流转**: A的检索结果 → 你的RAG处理

### 第三阶段：价格 → 发布 → 评估 (9/3-9/9)

#### A的工作
1. **价格影响分析**
   - yfinance数据获取
   - 价格变化计算
   - 写入stories表

#### 你的工作
1. **Web仪表盘**
   - 故事展示界面
   - 价格图表集成
   - 用户交互功能

#### 协作点
- **A提供价格数据**: 写入数据库
- **你展示数据**: 前端界面展示
- **共同评估**: 功能测试和优化

## 🛠️ 技术架构

### 数据流
```
A的数据采集 → 你的分块+向量化 → FAISS索引 → A的检索 → 你的RAG → 故事生成
```

### 关键接口
1. **A调用你的index模块**
   ```python
   # A需要调用的接口
   from apps.index import IndexingPipeline
   
   pipeline = IndexingPipeline()
   result = pipeline.process_document(document_data)
   ```

2. **你调用A的检索模块**
   ```python
   # 你需要调用的接口
   from apps.retrieve import NewsRetriever
   
   retriever = NewsRetriever()
   results = retriever.search(ticker="AAPL", time_range="3d")
   ```

## 📋 立即行动清单

### 今天要做的（8/20）
- [ ] 测试index模块功能
- [ ] 创建数据模型（Document, Chunk, Story）
- [ ] 准备A的调用接口

### 本周内要做的
- [ ] 完善index模块错误处理
- [ ] 创建RAG模块基础架构
- [ ] 设计数据库表结构

### 等待A完成后的行动
- [ ] 接收A的标准化数据
- [ ] 批量处理新闻数据
- [ ] 构建FAISS索引
- [ ] 验证检索功能

## 🔍 关键文件位置

- **项目根目录**: `/Users/xyl/vscode/fin-news-mvp`
- **你的核心模块**: `apps/index/`
- **配置文件**: `conf/`
- **文档**: `docs/`
- **测试脚本**: `scripts/test_index.py`

## 📞 沟通要点

### 与A需要确认的
1. **数据格式**: 确保tickers字段格式一致
2. **接口规范**: 明确模块间的调用方式
3. **错误处理**: 统一异常处理策略
4. **测试数据**: 准备一些测试用的新闻数据

### 技术决策点
1. **向量维度**: 当前使用384维，是否需要调整
2. **分块大小**: 当前300-500 tokens，是否合适
3. **存储策略**: FAISS + 本地文件 vs 云端存储

## 🚨 风险点

1. **A的数据采集延迟**: 影响整体进度
2. **向量化性能**: 大量数据时的处理速度
3. **AWS成本控制**: 确保在预算范围内
4. **数据质量**: 新闻数据的准确性和完整性

## 📈 成功指标

### Week 1验收标准
- [ ] 一键运行：拉取200-500篇新闻 → 成功落表
- [ ] FAISS检索：ticker=AAPL, time=[t-3d, t] 返回5-8条结果

### Week 2验收标准
- [ ] RAG输出：结构化JSON + 自然语言摘要
- [ ] Pydantic校验通过率 ≥ 95%

### Week 3验收标准
- [ ] 仪表盘：可筛选、可展开详情
- [ ] 定时任务：每日CRON成功运行
- [ ] 日报：成功生成和发送

---

**最后更新**: 2024-08-20  
**更新人**: B（你）  
**下次更新**: 完成index模块测试后
